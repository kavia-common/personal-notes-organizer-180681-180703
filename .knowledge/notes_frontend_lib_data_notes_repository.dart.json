{"is_source_file": true, "format": "Dart", "description": "This file defines an abstract class 'NotesRepository' for managing notes data, along with an in-memory implementation 'InMemoryNotesRepository'. It provides methods for observing all notes, upserting (create/update), deleting, and retrieving notes by ID. The class uses Dart streams to notify updates and manages notes with fields like pinned status and update timestamp.", "external_files": ["package:flutter/foundation.dart", "dart:async", "../models/models.dart"], "external_methods": ["Stream", "StreamController.broadcast", "copyWith", "firstWhere", "sort"], "published": ["NotesRepository", "InMemoryNotesRepository", "Note"], "classes": [{"name": "NotesRepository", "description": "Abstract interface for notes data access, decoupling UI from storage details."}, {"name": "InMemoryNotesRepository", "description": "A temporary in-memory implementation of the NotesRepository for development and testing."}], "methods": [{"name": "watchAll", "description": "Returns a stream of all notes, ordered with pinned notes first, then by most recent update."}, {"name": "upsert", "description": "Creates a new note or updates an existing one, assigning an ID and timestamp, then emits the change."}, {"name": "delete", "description": "Deletes a note by its ID and emits the updated list."}, {"name": "getById", "description": "Retrieves a note by its ID, or null if not found."}, {"name": "_emit", "description": "Private helper method that sorts and emits the current list of notes."}], "calls": ["StreamController<List<Note>>.broadcast", "note.copyWith", "List.indexWhere", "List.firstWhere", "List.sort", "StreamController.add", "DateTime.now", "List.removeWhere"], "search-terms": ["NotesRepository", "InMemoryNotesRepository", "watchAll", "upsert", "delete", "getById", "broadcast stream", "notes in-memory implementation"], "state": 2, "file_id": 189, "knowledge_revision": 510, "git_revision": "", "revision_history": [{"479": ""}, {"509": ""}, {"510": ""}], "hash": "37d3fdb1124e6a399a7252e04fba69b8", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/lib/data/notes_repository.dart"}